[GENERAL]
description   = B. malayi (current release)
db_adaptor    = Bio::DB::SeqFeature::Store
#db_adaptor    = Bio::DB::GFF
db_args       = -adaptor DBI::mysql
                -dsn     b_malayi

# Development
galaxy incoming = http://dev.wormbase.org/db/seq/gbgff
galaxy outgoing = http://test.g2.bx.psu.edu/tool_runner?tool_id=wormbase_test

# Production
#galaxy incoming = http://www.wormbase.org/db/seq/gbgff
#galaxy outgoing = http://main.g2.bx.psu.edu/tool_runner?tool_id=wormbase

plugins     = GFFDumper FastaDumper BatchDumper Submitter

quicklink plugins = GFFDumper FastaDumper

# routines to compile in advance
init_code = use lib '/usr/local/wormbase/cgi-perl/lib';

region segment = AUTO

header = sub {
        require ElegansSubs;
        require CGI;
        $Ace::Browser::AceSubs::TOP = 0;
        return ElegansSubs::Banner() .
        '
        <table width=100% style="background-color:azure;border:1px solid blue">
         <tr valign=top>
          <td width=15%> <img src="/images/bm_micro.jpg" width=120> </td>
          <td style="padding-left:20%"> 
	   <h2><i>Brugia malayi</i> Genome Browser</h2>
          </td>
         <tr>                                        
         </table>';
        }

footer = sub {
        require ElegansSubs;
        print '
        <hr>
        <table width="100%">
        <TR>
        <TD align="LEFT" class="databody">
        For the source code for this browser, see the <a href="http://www.gmod.org">
        Generic Model Organism Database Project.</a>  For other questions, send
        mail to <a href="mailto:harris@cshl.org">Todd Harris &lt;harris@cshl.org&gt;</a>.
        </TD>
        </TR>
        </table>';
        ElegansSubs::ElegansSearchBar();
        print ElegansSubs::Footer();
        return;
        }

balloon tips        = 1
titles are balloons = 1

custom balloons     = [balloon]
                      padding  = 10
                      maxWidth = 375

# list of tracks to turn on by default
default features = Genes AAUGUSTUS AmGENE AFGENESH

# The class of the objects used to establish the reference coordinates.
reference class  = Sequence

# examples to show in the introduction
examples = Bmal_supercontig12883 Bm1_03720  bma1.gene.242217.0

search attributes = Note Alias 

# "automatic" classes to try when an unqualified identifier is given
automatic classes = Sequence Gene

#image_padding = 60
pad_left   = 25
pad_right  = 25

# DAS reference server
das mapmaster = SELF

# Various places where you can insert your own HTML -- see configuration docs
html1 = 
html2 = 
html3 = 
html4 = 
html5 = 
html6 = 

# what image widths to offer
image widths  = 450 500 640 800 1024 1280

# default width of detailed view (pixels)
default width = 1024

# Web site configuration info
stylesheet  = /stylesheets/wormbase.css
buttons     = /gbrowse/images/buttons
tmpimages   = sub {
		my ($server) = $ENV{SERVER_NAME} =~ /(.*?)\..*/;
	  	$server    ||= 'local';
  		return "/tmp/gbrowse/$server","/var/tmp/gbrowse";
	}

# max and default segment sizes for detailed view
max segment     = 5000000
default segment = 5000

# zoom levels
zoom levels    = 100 200 1000 2000 5000 10000 20000 50000 100000 200000 500000 1000000

# colors of the overview, detailed map and key
overview bgcolor = gainsboro
key bgcolor      = beige


[DETAIL SELECT MENU]
width = 260
html  = <table style="width:100%">
         <tr>
           <th style="background:lightsteelblue;cell-padding:5">
             SELECTION
             <span style="right:0px;position:absolute;color:blue;cursor:pointer"
                   onclick="SelectArea.prototype.cancelRubber()">
               [X]
             </span>
           </th>
         </tr>
         <tr>
           <td>
             <a href="javascript:SelectArea.prototype.clearAndSubmit()">
              Zoom in
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?plugin=FastaDumper;plugin_action=Go;name=SELECTION" target="_new">
              Dump selection as FASTA
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=UCSC_BLAT" target="_new">
               BLAT this sequence
             </a>
           </td>
         </tr>
         <tr>
           <td onmouseup="SelectArea.prototype.cancelRubber()">
             <a href="?name=SELECTION;plugin=Submitter;plugin_do=Go;Submitter.target=NCBI_BLAST" target="_new">
               BLAST this sequence
             </a>
           </td>
         </tr>
       </table>

[Submitter:plugin]
submitter = [UCSC_BLAT]
            url        = http://genome.ucsc.edu/cgi-bin/hgBlat
            seq_label  = userSeq
            output     = hyperlink
            type       = DNA
            extra_html = Genome:
                         <SELECT name=org>
                         <OPTION VALUE="Human">Human</OPTION>
                         <OPTION VALUE="Chimp">Chimp</OPTION>
                         <OPTION VALUE="Mouse">Mouse</OPTION>
                         <OPTION VALUE="Rat">Rat</OPTION>
                         <OPTION VALUE="Cat">Cat</OPTION>
                         <OPTION VALUE="Dog">Dog</OPTION>
                         <OPTION VALUE="Horse">Horse</OPTION>
                         <OPTION VALUE="Cow">Cow</OPTION>
                         <OPTION VALUE="Chicken">Chicken</OPTION>
                         <OPTION VALUE="X. tropicalis">X. tropicalis</OPTION>
                         <OPTION VALUE="Zebrafish">Zebrafish</OPTION>
                         <OPTION VALUE="Tetraodon">Tetraodon</OPTION>
                         <OPTION VALUE="Fugu">Fugu</OPTION>
                         <OPTION VALUE="C. intestinalis">C. intestinalis</OPTION>
                         <OPTION VALUE="S. purpuratus">S. purpuratus</OPTION>
                         <OPTION SELECTED VALUE="C. elegans">C. elegans</OPTION>
                         <OPTION VALUE="C. brenneri">C. brenneri</OPTION>
                         <OPTION VALUE="C. briggsae">C. briggsae</OPTION>
                         <OPTION VALUE="C. remanei">C. remanei</OPTION>
                         <OPTION VALUE="P. pacificus">P. pacificus</OPTION>
                         <OPTION VALUE="D. melanogaster">D. melanogaster</OPTION>
                         <OPTION VALUE="D. simulans">D. simulans</OPTION>
                         <OPTION VALUE="D. sechellia">D. sechellia</OPTION>
                         <OPTION VALUE="D. yakuba">D. yakuba</OPTION>
                         <OPTION VALUE="D. erecta">D. erecta</OPTION>
                         <OPTION VALUE="D. ananassae">D. ananassae</OPTION>
                         <OPTION VALUE="D. pseudoobscura">D. pseudoobscura</OPTION>
                         <OPTION VALUE="D. persimilis">D. persimilis</OPTION>
                         <OPTION VALUE="D. virilis">D. virilis</OPTION>
                         <OPTION VALUE="D. mojavensis">D. mojavensis</OPTION>
                         <OPTION VALUE="D. grimshawi">D. grimshawi</OPTION>
                         <OPTION VALUE="A. gambiae">A. gambiae</OPTION>
                         <OPTION VALUE="A. mellifera">A. mellifera</OPTION>
                         <OPTION VALUE="S. cerevisiae">S. cerevisiae</OPTION>
                         <OPTION VALUE="SARS">SARS</OPTION>
                         </SELECT>

            [NCBI_BLAST]
            confirm   = 1
            url       = http://www.ncbi.nlm.nih.gov/blast/Blast.cgi
            seq_label = QUERY
            PAGE      = Nucleotides
            PROGRAM   = blastn
            DATABASE  = nr
            CLIENT    = web
            CMD       = put

########################
# Default glyph settings
########################

[TRACK DEFAULTS]
glyph         = generic
height        = 10
bgcolor       = lightgrey
fgcolor       = black
font2color    = blue
label density = 100
bump density  = 500
# where to link to when user clicks in detailed view
link          = AUTO
label_transcripts = sub { shift->get_SeqFeatures('mRNA') > 1 }
utr_color     = gainsboro

################## TRACK CONFIGURATION ####################
# the remainder of the sections configure individual tracks
###########################################################
[Genes]
feature      = gene:WormBase
glyph        = gene
category     = Genes
height       = 12
bgcolor      = sub {shift->strand < 1 ? 'turquoise' : 'violet' }
label        = 1
description  = 1
key          = Genes

[Genes:150000]
glyph        = generic
bump         = 0
maxdepth     = 1
stranded     = 1
label        = 0
description  = 0

[CDS:100000]
feature      = CDS
glyph        = cds
stranded     = 1

[TranslationF]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = purple
start_codons = 0
strand       = +1
arrow_height = 2
translation  = 3frame
category     = Sequence
key          = 3-frame translation (forward)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the forward strand
	is shown.

[DNA/GC Content]
glyph          = dna
global feature = 1
strand         = both
gc_window      = auto
height         = 40
fgcolor        = red
key            = Calculated GC Content
category       = Sequence

[TranslationR]
glyph        = translation
global feature = 1
height       = 20
fgcolor      = blue
strand       = -1
start_codons = 0
arrow_height = 2
translation  = 3frame
category     = Sequence
key          = 3-frame translation (reverse)
citation     = This track shows the position of stop codons at low magnifications,
	and the 3-frame translation at high magnifications.  Only the reverse
	strand is shown.

[Protein_match]
bgcolor      = lightsteelblue
feature      = protein_match
description  = sub {shift->source_tag}
balloon hover = sub { 
                  my $f = shift;
	          my $name = "<b>".$f->name.":</b> ";
		  my $other = $f->source_tag;
	          my @notes = $f->attributes('Note');
	          my $notes =  join(';', '',@notes) if @notes;
	          return "$name $other $notes";
                }
category     = Sequence

[REPEAT]
feature     = repeat_region
bgcolor     = red
height      = 8
category    = Sequence
key         = repeats
description = sub { shift->source_tag }

[AAUGUSTUS]
feature      = gene:AUGUSTUS
label        = 1
key          = AUGUSTUS gene predictions
glyph        = gene
bgcolor      = sub {shift->strand>0 ? 'violet' : 'turquoise'}
utr_color    = gainsboro
category     = nGASP Genes
title        = AUGUSTUS gene $name
citation     = AUGUSTUS gene set from the nGASP competition.  Courtesy of Mario Stanke.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions
height       = 12

[AmGENE]
feature      = gene:mGENE
label        = 1
key          = mGENE gene predictions
glyph        = gene
bgcolor      = sub {shift->strand>0 ? 'violet' : 'turquoise'}
utr_color    = gainsboro
category     = nGASP Genes
title        = mGENE gene $name
citation     = mGENE gene set from the nGASP competition.  Courtesy of Gabriele Schweikert and Gunnar Raetsch.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions
height       = 12

[AFGENESH]
feature      = gene:FGENESH
label        = 1
key          = FGENESH gene predictions
glyph        = gene
bgcolor      = sub {shift->strand>0 ? 'violet' : 'turquoise'}
utr_color    = gainsboro
category     = nGASP Genes
title        = FGENESH++ gene $name
citation     = FGENESH++ gene set from the nGASP competition.  Courtesy of Darin Blasiar.
               Gene models are available for download at ftp://ftp.wormbase.org/pub/wormbase/nGASP/final_gene_predictions/predictions
height       = 12


