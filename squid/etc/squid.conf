# This is the primary squid configuration for use at WormBase.
# WormBase employs a single squid reverse proxy server
# that balances the load between and caches responses from
# several back-end servers

# In general, squid (and the server that is hosting it) must deal with
# a number of situations, namely:

# -- Virtual hosts 
# -- Running on the same server that is also serving httpd
#   (subject to change in the future if I add a dedicated squid server)
# -- Caching of dynamic pages

# To balance the load between servers, squid uses a custom redirector
# script.  Configuration options that are being driven off a single
# backend server use "Single Back End Server" options.  Those that
# must be enabled to use the redirector are denoted by "LOAD
# BALANCING".  One set or the other of these options should be
# enabled.

# See the default squid.conf file for a full explanation of all server
# directives.

# Search for "POSSIBLE CONFIG ISSUE" for entries that may need modification

# -----------------------------------------------------------------------------
# NETWORK OPTIONS
# -----------------------------------------------------------------------------

#  TAG: http_port
# Description: where squid will listen for http requests
# WormBase: This should be the full IP of the server and listening port
http_port 143.48.220.124:80


#  TAG: https_port
# Note: This option is only available if Squid is rebuilt with the
#       --enable-ssl option
# Default: none (disabled)
# WormBase:  Not required / in use

#  TAG: ssl_unclean_shutdown
# Note: This option is only available if Squid is rebuilt with the
#       --enable-ssl option
# Default: ssl_unclean_shutdown off
# WormBase: not required

#  TAG: icp_port
# Description: where squid listens for ICP requests (inter-cache requests)
# Default: icp_port 3130
# WormBase: disabled by setting to 0
icp_port 0

#  TAG: htcp_port
# Description: Port to listen for inter-cache HTCP queries.
# Default: htcp_port 4827
# WormBase: disabled by setting to 0
#htcp_port 0

#  TAG: mcast_groups
# Description: list of multicast groups which server should join to 
#               recieve multicast ICP queries
# Default: none (disabled)
# WormBase: Not required / not in use

#  TAG: udp_incoming_address
#  TAG: udp_outgoing_address
# Description: ICP sockets used for sending and recieving requests from other caches
# Default: Do not bind to any specific address
# udp_incoming_address 0.0.0.0
# udp_outgoing_address 255.255.255.255
# WormBase: Not required / not in use


# OPTIONS WHICH AFFECT THE NEIGHBOR SELECTION ALGORITHM
# -----------------------------------------------------------------------------

#  TAG: cache_peer
# Description: Directives that specify other caches in a hierarchy
# Default: none
# WormBase: Not required / not in use (will be necessary if I deplyy multiple squids)

#  TAG: cache_peer_domain
# Description:Use to limit the domains for which a neighbor cache will be queried
# Default: none
# WormBase: Not required / not in use

#  TAG: neighbor_type_domain
# Default: none
# WormBase: Not required / not in use

#  TAG: icp_query_timeout	(msec)
# Description: Automatic timeout for ICP queries for roundtrip ICP queries
# Default: icp_query_timeout 0
# WormBase: Not applicable

#  TAG: maximum_icp_query_timeout	(msec)
# Description: upper limit for ICP query timeouts
# Default: maximum_icp_query_timeout 2000
# WormBase: Not applicable

#  TAG: mcast_icp_query_timeout	(msec)
# Description: time to wait for counting replies for multicast peers
# Default: mcast_icp_query_timeout 2000
# WormBase: Not applicable

#  TAG: dead_peer_timeout	(seconds)
# Description: How long before squid declares a cache peer "dead"
# Default: dead_peer_timeout 10 seconds
# WormBase: Not required / not in use (Could be a handy directive in the future)

#  TAG: hierarchy_stoplist
# Description: 
#	A list of words which, if found in a URL, cause the object to
#	be handled directly by this cache.  In other words, use this
#	to not query neighbor caches for certain objects.  You may
#	list this option multiple times.
# Default: hierarchy_stoplist cgi-bin ?
# WormBase: Not required / not in use (as long as squid is our only cache)

#  TAG: no_cache
# Description: Force matching requests to the origin server 
#              and do not cache the response.  These entries 
#              consist of a series of acl entries and the defining
#              no_cache directives.

# no_cache ACL rules:
# Skip caching of any requests for GBrowse, cisortho, WormMart, and various VirtualHosts
#acl GBROWSE urlpath_regex \/db\/seq\/gbrowse\/
# NOTE: This will also block caching of gbrowse_img (which is as it should be)
acl GBROWSE urlpath_regex -i /db/seq/gbrowse/
#acl GBROWSEIMG urlpath_regex -i /ace_images/gbrowse/
acl news     url_regex -i rss
acl feedback url_regex -i feedback    
acl Bugzilla url_regex -i bug
acl movable  url_regex -i movable
acl sitemap  url_regex -i sitemap
acl wiki     url_regex -i wiki
acl forum    url_regex -i forum
#acl collab   url_regex -i collab
acl vmx      url_regex -i vmx

no_cache deny GBROWSE
no_cache deny bugzilla
no_cache deny news
no_cache deny feedback
no_cache deny movable
no_cache deny sitemap
no_cache deny wiki
no_cache deny forum
#no_cache deny collab
no_cache deny vmx

# OPTIONS WHICH AFFECT THE CACHE SIZE
# -----------------------------------------------------------------------------

# POSSIBLE CONFIG ISSUE - should this be larger?
#  TAG: cache_mem	(bytes)
# Description: The ideal amount of memory to be used for In-Transit objects, 
#               Hot Objects, Negative-Cached objects.
# Default: cache_mem 8 MB
#cache_mem 8 MB
cache_mem 16 MB

# POSSIBLE CONFIG ISSUE
#  TAG: cache_swap_low	(percent, 0-100)
#  TAG: cache_swap_high	(percent, 0-100)
# Description: low and high-water marks for cache object replacement. Replacement
#               begins when disk usage is above low water and becomes more aggressive
#               as it approaches the high water mark.
#
# Defaults: cache_swap_low 90, cache_swap_high 95
cache_swap_low 90
cache_swap_high 95

#  TAG: maximum_object_size	(bytes)
# Description: Objects larger than this size will NOT be saved on disk..
# Default: maximum_object_size 4096 KB
maximum_object_size 4096 KB

#  TAG: minimum_object_size	(bytes)
# Description: Objects smaller than this size will NOT be saved on disk.
# Default: minimum_object_size 0KB
minimum_object_size 0 KB
#minimum_object_size 1 KB

#  TAG: maximum_object_size_in_memory	(bytes)
# Description: Objects greater than this size will not be stored in memory
# Default: maximum_object_size_in_memory 8 KB
maximum_object_size_in_memory 8 KB

#  TAG: ipcache_size	(number of entries)
#  TAG: ipcache_low	(percent)
#  TAG: ipcache_high	(percent)
#	The size, low-, and high-water marks for the IP cache.
#
# Default: ipcache_size 1024, ipcache_low 90, ipcache_high 95
ipcache_size 1024
ipcache_low 90
ipcache_high 95

#  TAG: fqdncache_size	(number of entries)
#	Maximum number of FQDN cache entries.
# Default: fqdncache_size 1024
fqdncache_size 1024

#  TAG: cache_replacement_policy
# Description: The cache replacement algorithm used to determine which 
#               cache entries should be evicted when disk space is needed
# Default: cache_replacement_policy lru
cache_replacement_policy lru

#  TAG: memory_replacement_policy
# Description: The cache replacement algorithm to use for in memory objects
# Default: memory_replacement_policy lru
memory_replacement_policy lru



# LOGFILE PATHNAMES AND CACHE DIRECTORIES
# -----------------------------------------------------------------------------

# POSSIBLE CONFIG ISSUE - Should this be increased?
#  TAG: cache_dir
# Description:  The cache dir type, location (may be several on different partions), 
#               MB to use for the disk cache (not the size of the disk itself!),                	 
#	        number of first level directories, number of second level directories,
#               (Note: these options only apply to UFS-formatted caches). Options
#               vary for other cache types.                               
# Default: cache_dir ufs /usr/local/squid/var/cache 100 16 256
#cache_dir ufs /usr/local/squid/var/cache 100 16 256
cache_dir ufs /usr/local/squid/var/cache 150 32 256

#  TAG: cache_access_log
# Description: Log every HTTP and ICP client request query
# Default: cache_access_log /usr/local/squid/var/logs/access.log
# WormBase: httpd style logs are created below
# cache_access_log /usr/local/squid/var/logs/access.log

#  TAG: cache_log
# Description: Cache logging file - logs general information about cache's behavior
# Default: cache_log /usr/local/squid/var/logs/cache.log
cache_log /usr/local/squid/var/logs/cache.log

# POSSIBLE CONFIG OPTION: Leave these on during debugging
#  TAG: cache_store_log
# Description: Logs activity of storage manager - not particularly useful
# Default: cache_store_log /usr/local/squid/var/logs/store.log
# WormBase: disabled
cache_store_log none

#  TAG: cache_swap_log
# Description: Location for cache "swap.state" file that holds meta data of disk-cached objects
# Default: place these files in the cache_dir (ie none)

#  TAG: emulate_httpd_log
# Description: Create httpd-style logs
# WormBase - not required?
# emulate_httpd_log on

# Custom log directives to really get an httpd style log
#logformat combined %>a %ui %un [%tl] "%rm %ru HTTP/%rv" %Hs %<st "%{Referer}>h" "%{User-Agent}>h" %Ss:%Sh
# Note: it may be necessary to purge %Ss:%Sh (the squid response codes) if analog chokes on these fields
logformat combined %>a %ui %un [%tl] %{Referer}>h "%{User-Agent}>h" "%rm %ru HTTP/%rv" %Hs %<st %Ss:%Sh
#access_log /usr/local/wormbase/logs/squid/access_log combined
access_log /usr/local/squid/logs/access_log combined

#  TAG: log_ip_on_direct	on|off
# Description: Log the destination IP in the hierarchy log when going direct.
# Default: log_ip_on_direct on
log_ip_on_direct on

#  TAG: mime_table
# Description: Pathname to Squid's MIME table - shouldn't need to be changed
# Default: mime_table /usr/local/squid/etc/mime.conf
mime_table /usr/local/squid/etc/mime.conf

#  TAG: log_mime_hdrs	on|off
# Description: Append both the request and response MIME headers for each HTTP transaction
# Default: log_mime_hdrs off
log_mime_hdrs off

#  TAG: useragent_log, referer_log
# Description: Log user agents and referers to the specified file
# WormBase: useragent and referrer are sent to the httpd-style logs 
#           courtesy of the custom_log patch applied during build
# useragent_log /usr/local/squid/var/logs/useragent.log
# referer_log   /usr/local/squid/var/logs/referer.log

#  TAG: pid_filename
# Description: A filename to write the process-id to.  To disable, enter "none".
# Default: pid_filename /usr/local/squid/var/logs/squid.pid
pid_filename /usr/local/squid/var/logs/squid.pid

#  TAG: debug_options
# Description: Logging level - which sections, level 1 lowest, 9 excessive)
# Default: debug_options ALL,1
debug_options ALL,5
# Debugging ACLs
#debug_options ALL,1 33,2

#  TAG: log_fqdn	on|off
# Description: Log fqdn in access log
# Default: log_fqdn off
log_fqdn off

#  TAG: client_netmask
#	A netmask for client addresses in logfiles and cachemgr output.
#	Change this to protect the privacy of your cache clients.
#	A netmask of 255.255.255.0 will log all IP's in that range with
#	the last digit set to '0'.
#
#Default:
# client_netmask 255.255.255.255


# OPTIONS FOR EXTERNAL SUPPORT PROGRAMS
# -----------------------------------------------------------------------------

#  TAG: ftp_user
# Default: ftp_user Squid@
# WormBase: not relevant

#  TAG: ftp_list_width
# Default: ftp_list_width 32
# WormBase: not relevant

#  TAG: ftp_passive
# Default: ftp_passive on
# WormBase: not relevant

#  TAG: ftp_sanitycheck
# Default: ftp_sanitycheck on
# WormBase: not relevant

#  TAG: ftp_telnet_protocol
# Default: ftp_telnet_protocol on
# WormBase: not relevant

#  TAG: cache_dns_program
# Default: cache_dns_program /usr/local/squid/libexec/dnsserver
# WormBase: not relevant

#  TAG: dns_children
# Default: dns_children 5
# WormBase: not relevant

#  TAG: dns_retransmit_interval
# Default: dns_retransmit_interval 5 seconds
# WormBase: not relevant

#  TAG: dns_timeout
# Default: dns_timeout 2 minutes
# WormBase: not relevant

#  TAG: dns_defnames	on|off
# Default: dns_defnames off
# WormBase: not relevant

#  TAG: dns_nameservers
# Default: none
# WormBase: not relevant

#  TAG: hosts_file
#	Location of the host-local IP name-address associations database
# Default: hosts_file /etc/hosts
hosts_file /etc/hosts

#  TAG: diskd_program
# Default: diskd_program /usr/local/squid/libexec/diskd
# WormBase: not in use

#  TAG: unlinkd_program
# Default: unlinkd_program /usr/local/squid/libexec/unlinkd
# WormBase: default is suitable

#  TAG: pinger_program
# Default: pinger_program /usr/local/squid/libexec/pinger
# WormBase: currently no inter-cache communications

#  TAG: redirect_program
#	Specify the location of the executable for the URL redirector.
# Default: none
# LOAD BALANCING CONFIG - enable this redirector
#redirect_program /usr/local/wormbase-admin/squid/redirectors/load_balancer.pl
#redirect_program /usr/local/wormbase-admin/squid/redirectors/separate_gbrowse_acedb.pl
#redirect_program /usr/local/wormbase-admin/squid/redirectors/all_vab.pl
redirect_program /usr/local/wormbase-admin/squid/redirectors/load_balancer-url.pl

# POSSIBLE CONFIG ISSUE - Is this a suitable number of children?
#  TAG: redirect_children
# Default: redirect_children 5
redirect_children 14

# LOAD BALANCING - POSSIBLE CONFIG ISSUE
#  TAG: redirect_rewrites_host_header
# Default: redirect_rewrites_host_header off
#redirect_rewrites_host_header off

# LOAD BALANCING - POSSIBLE CONFIG ISSUE - handle WormMart here?
#  TAG: redirector_access
#    which requests should be sent to the redirector
# Default: none
# Direct all requests for cisortho to 127

#acl all src 0.0.0.0/0.0.0.0
#acl localhost src 127.0.0.1/255.255.255.255
#acl to_localhost dst 127.0.0.0/255.255.255.255
#acl SSL_ports port 443 563
#acl CONNECT method CONNECT

# The public facing host - destination
acl from_proxy_host_test src 143.48.220.124/255.255.255.255
#acl proxy_host_test dst 143.48.220.124/255.255.255.255
http_access allow purge localhost
http_access deny purge

acl AllRequests src 0/0
redirector_access deny from_proxy_host_test
#redirector_access deny proxy_host_test
redirector_access allow AllRequests

# POSSIBLE CONFIG ISSUE - how to handle authentication, cookies?
#  TAG: auth_param
#  Lots of possible configuration here
# Recommended minimum configuration:
#auth_param digest program <uncomment and complete this line>
#auth_param digest children 5
#auth_param digest realm Squid proxy-caching web server
#auth_param digest nonce_garbage_interval 5 minutes
#auth_param digest nonce_max_duration 30 minutes
#auth_param digest nonce_max_count 50
#auth_param ntlm program <uncomment and complete this line to activate>
#auth_param ntlm children 5
#auth_param ntlm max_challenge_reuses 0
#auth_param ntlm max_challenge_lifetime 2 minutes
#auth_param ntlm use_ntlm_negotiate off
#auth_param basic program <uncomment and complete this line>
auth_param basic children 5
auth_param basic realm Squid proxy-caching web server
auth_param basic credentialsttl 2 hours
auth_param basic casesensitive off

# POSSIBLE CONFIG ISSUE
#  TAG: authenticate_cache_garbage_interval
# Default: authenticate_cache_garbage_interval 1 hour
# WormBase: unknown

# POSSIBLE CONFIG ISSUE
#  TAG: authenticate_ttl
# Default: authenticate_ttl 1 hour
# WormBase: unknown

# POSSIBLE CONFIG ISSUE
#  TAG: authenticate_ip_ttl
# Default: authenticate_ip_ttl 0 seconds
# WormBase: unknown

# POSSIBLE CONFIG ISSUE
#  TAG: external_acl_type
# Default: none


# OPTIONS FOR TUNING THE CACHE
# -----------------------------------------------------------------------------

#  TAG: wais_relay_host
#  TAG: wais_relay_port
# Default: wais_relay_port 0
# WormBase: not relevant

#  TAG: request_header_max_size	(KB)
# Default: request_header_max_size 20 KB

# POSSIBLE CONFIG ISSUE
#  TAG: request_body_max_size	(KB) // 0 = no limit
# Default: request_body_max_size 0 KB

# POSSIBLE CONFIG ISSUE - force caching of dynamic content
#  TAG: refresh_pattern
#	usage: refresh_pattern [-i] regex min percent max [options]
# Suggested default:
# refresh_pattern ^ftp:		1440	20%	10080
# refresh_pattern ^gopher:	1440	0%	1440
#refresh_pattern -i db 10000 100% 30000 ignore-reload
refresh_pattern -i db 10000 100% 30000

# Block refresh requests (p313)
refresh_pattern . 0 20% 10000 reload-into-ims

# POSSIBLE CONFIG ISSSUE - cache limits for aborted requests
# These values should be based on average page sizes
#  TAG: quick_abort_min	(KB)
#  TAG: quick_abort_max	(KB)
#  TAG: quick_abort_pct	(percent)
# Default: quick_abort_min 16 KB, quick_abort_max 16 KB, quick_abort_pct 95
# Always continue to fetch a page once it is being cached (min set to -1)
# Other directives should no longer apply
quick_abort_min -1 KB
quick_abort_max 16 KB
quick_abort_pct 95

# POSSIBLE CONFIG ISSUE
#  TAG: negative_ttl	time-units
# Default: negative_ttl 5 minutes
# Negatively cached objects are those that squid believes to be unavailable.
# Sometimes under high load, a page may become 
# unavailable (ie 404).  Let's set negative_ttl to a low
# value to prevent this from happening.
negative_ttl 5 seconds

#  TAG: positive_dns_ttl	time-units
# Default: positive_dns_ttl 6 hours
# WormBase: not relevant

#  TAG: negative_dns_ttl	time-units
# Default: negative_dns_ttl 1 minute
# WormBase: not relevant

# POSSIBLE CONFIG ISSUE
#  TAG: range_offset_limit	(bytes)
# Default: range_offset_limit 0 KB



# TIMEOUTS
# -----------------------------------------------------------------------------

#  TAG: forward_timeout	time-units
# Default: forward_timeout 4 minutes
# WormBase: not relevant

#  TAG: connect_timeout	time-units
# Default: connect_timeout 1 minute
# WormBase: not relevant

# POSSIBLE CONFIG ISSUE - (if using multiple caches)
#  TAG: peer_connect_timeout	time-units
# Default: peer_connect_timeout 30 seconds
# WormBase: not currently relevant

#  TAG: read_timeout	time-units
# Default: read_timeout 15 minutes
# WormBase: not currently relevant
read_timeout 30 minutes

#  TAG: request_timeout
# Default: request_timeout 5 minutes
# WormBase: not currently relevant
request_timeout 30 minutes


# POSSIBLE CONFIG ISSUE
#  TAG: persistent_request_timeout
#	How long to wait for the next HTTP request on a persistent
#	connection after the previous request completes.
# Default:  persistent_request_timeout 1 minute
# WormBase: not relevant?
persistent_request_timeout 5 minutes

# POSSIBLE CONFIG ISSUE
#  TAG: client_lifetime	time-units
#	The maximum amount of time a client (browser) is allowed to
#	remain connected to the cache process.  This protects the Cache
#	from having a lot of sockets (and hence file descriptors) tied up
#	in a CLOSE_WAIT state from remote clients that go away without
#	properly shutting down (either because of a network failure or
#	because of a poor client implementation).  The default is one
#	day, 1440 minutes.
#
#	NOTE:  The default value is intended to be much larger than any
#	client would ever need to be connected to your cache.  You
#	should probably change client_lifetime only as a last resort.
#	If you seem to have many client connections tying up
#	filedescriptors, we recommend first tuning the read_timeout,
#	request_timeout, persistent_request_timeout and quick_abort values.
# Default: client_lifetime 1 day

#  TAG: half_closed_clients
#	Some clients may shutdown the sending side of their TCP
#	connections, while leaving their receiving sides open.	Sometimes,
#	Squid can not tell the difference between a half-closed and a
#	fully-closed TCP connection.  By default, half-closed client
#	connections are kept open until a read(2) or write(2) on the
#	socket returns an error.  Change this option to 'off' and Squid
#	will immediately close client connections when read(2) returns
#	"no more data to read."
# Default: half_closed_clients on

#  TAG: pconn_timeout
#	Timeout for idle persistent connections to servers and other
#	proxies.
# Default: pconn_timeout 120 seconds

#  TAG: ident_timeout
#	Maximum time to wait for IDENT lookups to complete.
#
#	If this is too high, and you enabled IDENT lookups from untrusted
#	users, you might be susceptible to denial-of-service by having
#	many ident requests going at once.
# Default: ident_timeout 10 seconds

#  TAG: shutdown_lifetime	time-units
#	When SIGTERM or SIGHUP is received, the cache is put into
#	"shutdown pending" mode until all active sockets are closed.
#	This value is the lifetime to set for all open descriptors
#	during shutdown mode.  Any active clients after this many
#	seconds will receive a 'timeout' message.
# Default is 30 seconds
shutdown_lifetime 5 seconds


# ACCESS CONTROLS
# -----------------------------------------------------------------------------

#  TAG: acl
#	Defining an Access List
#
#	acl aclname acltype string1 ...
#	acl aclname acltype "file" ...
#
#	when using "file", the file should contain one item per line
#
#	acltype is one of the types described below
#
#	By default, regular expressions are CASE-SENSITIVE.  To make
#	them case-insensitive, use the -i option.
#
#	acl aclname src      ip-address/netmask ... (clients IP address)
#	acl aclname src      addr1-addr2/netmask ... (range of addresses)
#	acl aclname dst      ip-address/netmask ... (URL host's IP address)
#	acl aclname myip     ip-address/netmask ... (local socket IP address)
#
#	acl aclname arp      mac-address ... (xx:xx:xx:xx:xx:xx notation)
#	  # The arp ACL requires the special configure option --enable-arp-acl.
#	  # Furthermore, the arp ACL code is not portable to all operating systems.
#	  # It works on Linux, Solaris, FreeBSD and some other *BSD variants.
#	  #
#	  # NOTE: Squid can only determine the MAC address for clients that are on
#	  # the same subnet. If the client is on a different subnet, then Squid cannot
#	  # find out its MAC address.
#
#	acl aclname srcdomain   .foo.com ...    # reverse lookup, client IP
#	acl aclname dstdomain   .foo.com ...    # Destination server from URL
#	acl aclname srcdom_regex [-i] xxx ...   # regex matching client name
#	acl aclname dstdom_regex [-i] xxx ...   # regex matching server
#	  # For dstdomain and dstdom_regex  a reverse lookup is tried if a IP
#	  # based URL is used and no match is found. The name "none" is used
#	  # if the reverse lookup fails.
#
#	acl aclname time     [day-abbrevs]  [h1:m1-h2:m2]
#	    day-abbrevs:
#		S - Sunday
#		M - Monday
#		T - Tuesday
#		W - Wednesday
#		H - Thursday
#		F - Friday
#		A - Saturday
#	    h1:m1 must be less than h2:m2
#	acl aclname url_regex [-i] ^http:// ...	# regex matching on whole URL
#	acl aclname urlpath_regex [-i] \.gif$ ...	# regex matching on URL path
#	acl aclname urllogin [-i] [^a-zA-Z0-9] ...	# regex matching on URL login field
#	acl aclname port     80 70 21 ...
#	acl aclname port     0-1024 ...		# ranges allowed
#	acl aclname myport   3128 ...		# (local socket TCP port)
#	acl aclname proto    HTTP FTP ...
#	acl aclname method   GET POST ...
#	acl aclname browser  [-i] regexp ...
#	  # pattern match on User-Agent header (see also req_header below)
#        acl aclname referer_regex  [-i] regexp ...
#          # pattern match on Referer header
#          # Referer is highly unreliable, so use with care
#	acl aclname ident    username ...
#	acl aclname ident_regex [-i] pattern ...
#	  # string match on ident output.
#	  # use REQUIRED to accept any non-null ident.
#	acl aclname src_as   number ...
#	acl aclname dst_as   number ...
#	  # Except for access control, AS numbers can be used for
#	  # routing of requests to specific caches. Here's an
#	  # example for routing all requests for AS#1241 and only
#	  # those to mycache.mydomain.net:
#	  # acl asexample dst_as 1241
#	  # cache_peer_access mycache.mydomain.net allow asexample
#	  # cache_peer_access mycache_mydomain.net deny all
#
#	acl aclname proxy_auth username ...
#	acl aclname proxy_auth_regex [-i] pattern ...
#	  # list of valid usernames
#	  # use REQUIRED to accept any valid username.
#	  #
#	  # NOTE: when a Proxy-Authentication header is sent but it is not
#	  # needed during ACL checking the username is NOT logged
#	  # in access.log.
#	  #
#	  # NOTE: proxy_auth requires a EXTERNAL authentication program
#	  # to check username/password combinations (see
#	  # auth_param directive).
#	  #
#	  # WARNING: proxy_auth can't be used in a transparent proxy. It
#	  # collides with any authentication done by origin servers. It may
#	  # seem like it works at first, but it doesn't.
#
#	acl aclname snmp_community string ...
#	  # A community string to limit access to your SNMP Agent
#	  # Example:
#	  #
#	  #	acl snmppublic snmp_community public
#
#	acl aclname maxconn number
#	  # This will be matched when the client's IP address has
#	  # more than <number> HTTP connections established.
#
#	acl aclname max_user_ip [-s] number
#	  # This will be matched when the user attempts to log in from more
#	  # than <number> different ip addresses. The authenticate_ip_ttl
#	  # parameter controls the timeout on the ip entries.
#	  # If -s is specified the limit is strict, denying browsing
#	  # from any further IP addresses until the ttl has expired. Without
#	  # -s Squid will just annoy the user by "randomly" denying requests.
#	  # (the counter is reset each time the limit is reached and a
#	  # request is denied)
#	  # NOTE: in acceleration mode or where there is mesh of child proxies,
#	  # clients may appear to come from multiple addresses if they are
#	  # going through proxy farms, so a limit of 1 may cause user problems.
#
#	acl aclname req_mime_type mime-type1 ...
#	  # regex match against the mime type of the request generated
#	  # by the client. Can be used to detect file upload or some
#	  # types HTTP tunelling requests.
#	  # NOTE: This does NOT match the reply. You cannot use this
#	  # to match the returned file type.
#
#	acl aclname req_header header-name [-i] any\.regex\.here
#	  # regex match against any of the known request headers.  May be
#	  # thought of as a superset of "browser", "referer" and "mime-type"
#	  # acls.
#
#	acl aclname rep_mime_type mime-type1 ...
#	  # regex match against the mime type of the reply recieved by
#	  # squid. Can be used to detect file download or some
#	  # types HTTP tunelling requests.
#	  # NOTE: This has no effect in http_access rules. It only has
#	  # effect in rules that affect the reply data stream such as
#	  # http_reply_access.
#
#	acl aclname rep_header header-name [-i] any\.regex\.here
#	  # regex match against any of the known response headers.
#	  # Example:
#	  #
#	  # acl many_spaces rep_header Content-Disposition -i [[:space:]]{3,}
#
#	acl acl_name external class_name [arguments...]
#	  # external ACL lookup via a helper class defined by the
#	  # external_acl_type directive.
#
#Examples:
#acl macaddress arp 09:00:2b:23:45:67
#acl myexample dst_as 1241
#acl password proxy_auth REQUIRED
#acl fileupload req_mime_type -i ^multipart/form-data$
#acl javascript rep_mime_type -i ^application/x-javascript$

#Recommended minimum configuration:
acl all src 0.0.0.0/0.0.0.0
acl localhost src 127.0.0.1/255.255.255.255
acl to_localhost dst 127.0.0.0/255.255.255.255
#acl SSL_ports port 443 563
#acl CONNECT method CONNECT

# LOAD BALANCING - each of the backend servers must be listed here
acl vab dst 143.48.220.56/255.255.255.255
acl blast dst 143.48.220.41/255.255.255.255
acl unc dst 143.48.220.86/255.255.255.255
acl from_unc src 143.48.220.86/255.255.255.255
acl server_pool dst 143.48.220.86/32 143.48.220.56/32 143.48.220.41/32

# The public facing host - destination
acl from_proxy_host src 143.48.220.124/255.255.255.255
acl proxy_host dst 143.48.220.124/255.255.255.255
acl proxy_port port 80

# Allow purging of cache objects from the localhost
acl PURGE method purge

# only allow access to cache 
# manager from th and localhost
acl CacheManager proto cache_object
acl ToddAtHome src 24.10.175.230/255.255.255.255

#  TAG: http_access
#	Allowing or Denying access based on defined access lists
#
#	Access to the HTTP port:
#	http_access allow|deny [!]aclname ...
#
#	NOTE on default values:
#
#	If there are no "access" lines present, the default is to deny
#	the request.
#
#	If none of the "access" lines cause a match, the default is the
#	opposite of the last line in the list.  If the last line was
#	deny, the default is allow.  Conversely, if the last line
#	is allow, the default will be deny.  For these reasons, it is a
#	good idea to have an "deny all" or "allow all" entry at the end
#	of your access lists to avoid potential confusion.
#
# Default:
# http_access deny all

# Deny CONNECT to other than SSL ports
#####http_access deny CONNECT !SSL_ports
#
# We strongly recommend the following be uncommented to protect innocent
# web applications running on the proxy server who think the only
# one who can access services on "localhost" is a local user
#http_access deny to_localhost
#
# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS

# Allow access to the localhost
http_access allow proxy_host
http_access allow localhost
http_access allow CacheManager localhost
http_access allow CacheManager from_proxy_host
#
http_access allow CacheManager to_localhost
http_access allow CacheManager proxy_host
http_access deny CacheManager

# Allow cache purging from the localhost only
http_access allow PURGE localhost
http_access deny PURGE  

# Specifically allow access to our backend servers
#http_access allow vab
#http_access allow unc

#http_access deny !server_pool

# And finally deny all other access except for requests
# directed towards this proxy
http_access deny !proxy_host
http_access deny !proxy_port
http_access allow all


#  TAG: http_reply_access
#        Allow replies to client requests. This is complementary to http_access.
#
#        http_reply_access allow|deny [!] aclname ...
#
#        NOTE: if there are no access lines present, the default is to allow
#	all replies
#
#        If none of the access lines cause a match the opposite of the
#        last line will apply. Thus it is good practice to end the rules
#        with an "allow all" or "deny all" entry.
#
# Default:
# http_reply_access allow all
#

#  TAG: icp_access
#	Allowing or Denying access to the ICP port based on defined
#	access lists
#
#	icp_access  allow|deny [!]aclname ...
#
#	See http_access for details
#
# Default:
# icp_access deny all
#
#Allow ICP queries from everyone
icp_access allow all

#  TAG: miss_access
#	Use to force your neighbors to use you as a sibling instead of
#	a parent.  For example:
#
#		acl localclients src 172.16.0.0/16
#		miss_access allow localclients
#		miss_access deny  !localclients
#
#	This means only your local clients are allowed to fetch
#	MISSES and all other clients can only fetch HITS.
#
#	By default, allow all clients who passed the http_access rules
#	to fetch MISSES from us.
#
#Default setting:
# miss_access allow all

#  TAG: cache_peer_access
#	Similar to 'cache_peer_domain' but provides more flexibility by
#	using ACL elements.
#
#	cache_peer_access cache-host allow|deny [!]aclname ...
#
#	The syntax is identical to 'http_access' and the other lists of
#	ACL elements.  See the comments for 'http_access' below, or
#	the Squid FAQ (http://www.squid-cache.org/FAQ/FAQ-10.html).
#
#Default:
# none

#  TAG: ident_lookup_access
#	A list of ACL elements which, if matched, cause an ident
#	(RFC931) lookup to be performed for this request.  For
#	example, you might choose to always perform ident lookups
#	for your main multi-user Unix boxes, but not for your Macs
#	and PCs.  By default, ident lookups are not performed for
#	any requests.
#
#	To enable ident lookups for specific client addresses, you
#	can follow this example:
#
#	acl ident_aware_hosts src 198.168.1.0/255.255.255.0
#	ident_lookup_access allow ident_aware_hosts
#	ident_lookup_access deny All
#
#	Only src type ACL checks are fully supported.  A src_domain
#	ACL might work at times, but it will not always provide
#	the correct result.
#
#Default:
# ident_lookup_access deny all

#  TAG: tcp_outgoing_tos
#	Allows you to select a TOS/Diffserv value to mark outgoing
#	connections with, based on the username or source address
#	making the request.
#
#	tcp_outgoing_tos ds-field [!]aclname ...
#
#	Example where normal_service_net uses the TOS value 0x00
#	and normal_service_net uses 0x20
#
#	acl normal_service_net src 10.0.0.0/255.255.255.0
#	acl good_service_net src 10.0.1.0/255.255.255.0
#	tcp_outgoing_tos 0x00 normal_service_net 0x00
#	tcp_outgoing_tos 0x20 good_service_net
#
#	TOS/DSCP values really only have local significance - so you should
#	know what you're specifying. For more information, see RFC2474 and 
#	RFC3260.
#
#	The TOS/DSCP byte must be exactly that - a octet value  0 - 255, or
#	"default" to use whatever default your host has. Note that in
#	practice often only values 0 - 63 is useable as the two highest bits
#	have been redefined for use by ECN (RFC3168).
#
#	Processing proceeds in the order specified, and stops at first fully
#	matching line.
#
#Default:
# none

#  TAG: tcp_outgoing_address
#	Allows you to map requests to different outgoing IP addresses
#	based on the username or sourceaddress of the user making
#	the request.
#
#	tcp_outgoing_address ipaddr [[!]aclname] ...
#
#	Example where requests from 10.0.0.0/24 will be forwareded
#	with source address 10.1.0.1, 10.0.2.0/24 forwarded with
#	source address 10.1.0.2 and the rest will be forwarded with
#	source address 10.1.0.3.
#
#	acl normal_service_net src 10.0.0.0/255.255.255.0
#	acl good_service_net src 10.0.1.0/255.255.255.0
#	tcp_outgoing_address 10.0.0.1 normal_service_net
#	tcp_outgoing_address 10.0.0.2 good_service_net
#	tcp_outgoing_address 10.0.0.3
#
#	Processing proceeds in the order specified, and stops at first fully
#	matching line.
#
#Default:
# none

#  TAG: reply_header_max_size	(KB)
#	This specifies the maximum size for HTTP headers in a reply.
#	Reply headers are usually relatively small (about 512 bytes).
#	Placing a limit on the reply header size will catch certain
#	bugs (for example with persistent connections) and possibly
#	buffer-overflow or denial-of-service attacks.
#
#Default:
# reply_header_max_size 20 KB

#  TAG: reply_body_max_size	bytes allow|deny acl acl...
#        This option specifies the maximum size of a reply body in bytes.
#	It can be used to prevent users from downloading very large files,
#	such as MP3's and movies. When the reply headers are recieved,
#	the reply_body_max_size lines are processed, and the first line with
#	a result of "allow" is used as the maximum body size for this reply.
#	This size is checked twice. First when we get the reply headers,
#	we check the content-length value.  If the content length value exists
#	and is larger than the allowed size, the request is denied and the
#	user receives an error message that says "the request or reply
#	is too large." If there is no content-length, and the reply
#	size exceeds this limit, the client's connection is just closed
#	and they will receive a partial reply.
#
#	WARNING: downstream caches probably can not detect a partial reply
#	if there is no content-length header, so they will cache
#	partial responses and give them out as hits.  You should NOT
#	use this option if you have downstream caches.
#
#	If you set this parameter to zero (the default), there will be
#	no limit imposed.
#
#Default:
# reply_body_max_size 0 allow all


# ADMINISTRATIVE PARAMETERS
# -----------------------------------------------------------------------------

#  TAG: cache_mgr
#	Email-address of local cache manager who will receive
#	mail if the cache dies.  The default is "webmaster."
#
#Default:
cache_mgr harris@cshl.edu

#  TAG: cache_effective_user, cache_effective_group
#       The user and group that squid should run as
cache_effective_user squid
cache_effective_group squid

# POSSIBLE CONFIG ISSUE
#  TAG: visible_hostname
#	If you want to present a special hostname in error messages, etc,
#	define this.  Otherwise, the return value of gethostname()
#	will be used. If you have multiple caches in a cluster and
#	get errors about IP-forwarding you must set them to have individual
#	names with this setting.
#
# Default:
# none
# POSSIBLE TROUBLE SPOT!
visible_hostname www.wormbase.org

# POSSIBLE CONFIG ISSUE
#  TAG: unique_hostname
#	If you want to have multiple machines with the same
#	'visible_hostname' you must give each machine a different
#	'unique_hostname' so forwarding loops can be detected.
#
# Default:
# none

#  TAG: hostname_aliases
#	A list of other DNS names your cache has.
#
# Default:
# none


# OPTIONS FOR THE CACHE REGISTRATION SERVICE
# -----------------------------------------------------------------------------
#
#	This section contains parameters for the (optional) cache
#	announcement service.  This service is provided to help
#	cache administrators locate one another in order to join or
#	create cache hierarchies.
#
#	An 'announcement' message is sent (via UDP) to the registration
#	service by Squid.  By default, the announcement message is NOT
#	SENT unless you enable it with 'announce_period' below.
#
#	The announcement message includes your hostname, plus the
#	following information from this configuration file:
#
#		http_port
#		icp_port
#		cache_mgr
#
#	All current information is processed regularly and made
#	available on the Web at http://www.ircache.net/Cache/Tracker/.

#  TAG: announce_period
#	This is how frequently to send cache announcements.  The
#	default is `0' which disables sending the announcement
#	messages.
#
#	To enable announcing your cache, just uncomment the line
#	below.
#
#Default:
# announce_period 0
#
#To enable announcing your cache, just uncomment the line below.
#announce_period 1 day

#  TAG: announce_host
#  TAG: announce_file
#  TAG: announce_port
#	announce_host and announce_port set the hostname and port
#	number where the registration message will be sent.
#
#	Hostname will default to 'tracker.ircache.net' and port will
#	default default to 3131.  If the 'filename' argument is given,
#	the contents of that file will be included in the announce
#	message.
#
#Default:
# announce_host tracker.ircache.net
# announce_port 3131


# HTTPD-ACCELERATOR OPTIONS
# -----------------------------------------------------------------------------

#  TAG: httpd_accel_host
#  TAG: httpd_accel_port
#	If you want to run Squid as an httpd accelerator, define the
#	host name and port number where the real HTTP server is.
#
#	If you want IP based virtual host support specify the
#	hostname as "virtual". This will make Squid use the IP address
#	where it accepted the request as hostname in the URL.
#
#	If you want virtual port support specify the port as "0".
#
#	NOTE: enabling httpd_accel_host disables proxy-caching and
#	ICP.  If you want these features enabled also, set
#	the 'httpd_accel_with_proxy' option.
#
# Default: httpd_accel_port 80
# We will bind apache to 127.0.0.1

# NON-LOAD BALANCING CONFIG
#httpd_accel_host 127.0.0.1
#httpd_accel_port 80
# LOAD BALANCING
httpd_accel_host roundrobin.wormbase.org
httpd_accel_port 80

#  TAG: httpd_accel_single_host	on|off
# NON-LOAD BALANCING CONFIG
# httpd_accel_single_host on
# LOAD BALANCING CONFIG - this must be OFF when using a redirector.
# If ON it sends requests to httpd_accel_host regardless of what
# redirectors say
httpd_accel_single_host off

#  TAG: httpd_accel_with_proxy	on|off
#	If you want to use Squid as both a local httpd accelerator
#	and as a proxy, change this to 'on'. Note however your
#	proxy users may have trouble to reach the accelerated domains
#	unless their browsers are configured not to use this proxy for
#	those domains (for example via the no_proxy browser configuration
#	setting)
#
# Default:
# httpd_accel_with_proxy off

# POSSIBLE CONFIG ISSUE - see also redirect_rewrites_host_header
#  TAG: httpd_accel_uses_host_header	on|off
#	HTTP/1.1 requests include a Host: header which is basically the
#	hostname from the URL.  The Host: header is used for domain based
#	virutal hosts. If your accelerator needs to provide domain based
#	virtual hosts on the same IP address you will need to turn this
#	on.
#
#	Note Squid does NOT check the value of the Host header matches
#	any of your accelerated server, so it may open a big security hole
#	unless you take care to set up access controls proper.  We recommend
#	this option remain disabled unless you are sure of what you
#	are doing.
#
#	However, you will need to enable this option if you run Squid
#	as a transparent proxy.  Otherwise, virtual servers which
#	require the Host: header will not be properly cached.
#
#Default:
# NON-LOAD BALANCING
#httpd_accel_uses_host_header on
# LOAD BALANCING
# Not necessary for WormBase
httpd_accel_uses_host_header off

#  TAG: httpd_accel_no_pmtu_disc	on|off
#	In many setups of transparently intercepting proxies Path-MTU
#	discovery can not work on traffic towards the clients. This is
#	the case when the intercepting device does not fully track
#	connections and fails to forward ICMP must fragment messages
#	to the cache server. 
#	
#	If you have such setup and experience that certain clients
#	sporadically hang or never complete requests set this to on.
#
#Default:
#httpd_accel_no_pmtu_disc on


# MISCELLANEOUS
# -----------------------------------------------------------------------------

#  TAG: dns_testnames
#	The DNS tests exit as soon as the first site is successfully looked up
#
#	This test can be disabled with the -D command line option.
#
#Default:
# dns_testnames netscape.com internic.net nlanr.net microsoft.com

# POSSIBLE CONFIG ISSUE
#  TAG: logfile_rotate
#	Specifies the number of logfile rotations to make when you
#	type 'squid -k rotate'.  The default is 10, which will rotate
#	with extensions 0 through 9.  Setting logfile_rotate to 0 will
#	disable the rotation, but the logfiles are still closed and
#	re-opened.  This will enable you to rename the logfiles
#	yourself just before sending the rotate signal.
#
#	Note, the 'squid -k rotate' command normally sends a USR1
#	signal to the running squid process.  In certain situations
#	(e.g. on Linux with Async I/O), USR1 is used for other
#	purposes, so -k rotate uses another signal.  It is best to get
#	in the habit of using 'squid -k rotate' instead of 'kill -USR1
#	<pid>'.
#
# Default: logfile_rotate 10
# WormBase: log file rotation is OFF.  We will use a separate utility for log rotation
logfile_rotate 0

#  TAG: append_domain
#	Appends local domain name to hostnames without any dots in
#	them.  append_domain must begin with a period.
#
#	Be warned there are now Internet names with no dots in
#	them using only top-domain names, so setting this may
#	cause some Internet sites to become unavailable.
#
#Example:
# append_domain .yourdomain.com
#
#Default:
# none

#  TAG: tcp_recv_bufsize	(bytes)
#	Size of receive buffer to set for TCP sockets.  Probably just
#	as easy to change your kernel's default.  Set to zero to use
#	the default buffer size.
#
#Default:
# tcp_recv_bufsize 0 bytes

# POSSIBLE CONFIG ISSUE
#  TAG: err_html_text
#	HTML text to include in error messages.  Make this a "mailto"
#	URL to your admin address, or maybe just a link to your
#	organizations Web page.
#
#	To include this in your error messages, you must rewrite
#	the error template files (found in the "errors" directory).
#	Wherever you want the 'err_html_text' line to appear,
#	insert a %L tag in the error template file.
#
#Default:
# none

#  TAG: deny_info
#	Usage:   deny_info err_page_name acl
#	or       deny_info http://... acl
#	Example: deny_info ERR_CUSTOM_ACCESS_DENIED bad_guys
#
#	This can be used to return a ERR_ page for requests which
#	do not pass the 'http_access' rules.  A single ACL will cause
#	the http_access check to fail.  If a 'deny_info' line exists
#	for that ACL Squid returns a corresponding error page.
#
#	You may use ERR_ pages that come with Squid or create your own pages
#	and put them into the configured errors/ directory.
#
#	Alternatively you can specify an error URL. The browsers will
#	get redirected (302) to the specified URL. %s in the redirection
#	URL will be replaced by the requested URL.
#
#	Alternatively you can tell Squid to reset the TCP connection
#	by specifying TCP_RESET.
#
#Default:
# none


# POSSIBLE CONFIG ISSUE
#  TAG: memory_pools	on|off
#	If set, Squid will keep pools of allocated (but unused) memory
#	available for future use.  If memory is a premium on your
#	system and you believe your malloc library outperforms Squid
#	routines, disable this.
#
#Default:
# memory_pools on

# POSSIBLE CONFIG ISSUE
#  TAG: memory_pools_limit	(bytes)
#	Used only with memory_pools on:
#	memory_pools_limit 50 MB
#
#	If set to a non-zero value, Squid will keep at most the specified
#	limit of allocated (but unused) memory in memory pools. All free()
#	requests that exceed this limit will be handled by your malloc
#	library. Squid does not pre-allocate any memory, just safe-keeps
#	objects that otherwise would be free()d. Thus, it is safe to set
#	memory_pools_limit to a reasonably high value even if your
#	configuration will use less memory.
#
#	If set to zero, Squid will keep all memory it can. That is, there
#	will be no limit on the total amount of memory used for safe-keeping.
#
#	To disable memory allocation optimization, do not set
#	memory_pools_limit to 0. Set memory_pools to "off" instead.
#
#	An overhead for maintaining memory pools is not taken into account
#	when the limit is checked. This overhead is close to four bytes per
#	object kept. However, pools may actually _save_ memory because of
#	reduced memory thrashing in your malloc library.
#
#Default:
# memory_pools_limit 5 MB

# POSSIBLE CONFIG ISSUE
#  TAG: forwarded_for	on|off
#	If set, Squid will include your system's IP address or name
#	in the HTTP requests it forwards.  By default it looks like
#	this:
#
#		X-Forwarded-For: 192.1.2.3
#
#	If you disable this, it will appear as
#
#		X-Forwarded-For: unknown
#
# Default:
# forwarded_for on

#  TAG: log_icp_queries	on|off
#	If set, ICP queries are logged to access.log. You may wish
#	do disable this if your ICP load is VERY high to speed things
#	up or to simplify log analysis.
#
#Default:
# log_icp_queries on

#  TAG: icp_hit_stale	on|off
#	If you want to return ICP_HIT for stale cache objects, set this
#	option to 'on'.  If you have sibling relationships with caches
#	in other administrative domains, this should be 'off'.  If you only
#	have sibling relationships with caches under your control,
#	it is probably okay to set this to 'on'.
#	If set to 'on', your siblings should use the option "allow-miss"
#	on their cache_peer lines for connecting to you.
#
#Default:
# icp_hit_stale off

#  TAG: minimum_direct_hops
#	If using the ICMP pinging stuff, do direct fetches for sites
#	which are no more than this many hops away.
#
#Default:
# minimum_direct_hops 4

#  TAG: minimum_direct_rtt
#	If using the ICMP pinging stuff, do direct fetches for sites
#	which are no more than this many rtt milliseconds away.
#
#Default:
# minimum_direct_rtt 400

#  TAG: cachemgr_passwd
#	Specify passwords for cachemgr operations.
#
#	Usage: cachemgr_passwd password action action ...
#
#	Some valid actions are (see cache manager menu for a full list):
#		5min
#		60min
#		asndb
#		authenticator
#		cbdata
#		client_list
#		comm_incoming
#		config *
#		counters
#		delay
#		digest_stats
#		dns
#		events
#		filedescriptors
#		fqdncache
#		histograms
#		http_headers
#		info
#		io
#		ipcache
#		mem
#		menu
#		netdb
#		non_peers
#		objects
#		offline_toggle *
#		pconn
#		peer_select
#		redirector
#		refresh
#		server_list
#		shutdown *
#		store_digest
#		storedir
#		utilization
#		via_headers
#		vm_objects
#
#	* Indicates actions which will not be performed without a
#	  valid password, others can be performed if not listed here.
#
#	To disable an action, set the password to "disable".
#	To allow performing an action without a password, set the
#	password to "none".
#
#	Use the keyword "all" to set the same password for all actions.
#
# Default:
# none
#cachemgr_passwd totalelegans all

# POSSIBLE CONFIG ISSUE - what is the average size of a dynamically generated page?
#  TAG: store_avg_object_size	(kbytes)
#	Average object size, used to estimate number of objects your
#	cache can hold.  See doc/Release-Notes-1.1.txt.  The default is
#	13 KB.
#
#Default:
# store_avg_object_size 13 KB

# POSSIBLE CONFIG ISSUE
#  TAG: store_objects_per_bucket
#	Target number of objects per bucket in the store hash table.
#	Lowering this value increases the total number of buckets and
#	also the storage maintenance rate.  The default is 50.
#
#Default:
# store_objects_per_bucket 20

# POSSIBLE CONFIG ISSUE
#  TAG: client_db	on|off
#	If you want to disable collecting per-client statistics,
#	turn off client_db here.
#
#Default:
# client_db on

#  TAG: netdb_low
#  TAG: netdb_high
#	The low and high water marks for the ICMP measurement
#	database.  These are counts, not percents.  The defaults are
#	900 and 1000.  When the high water mark is reached, database
#	entries will be deleted until the low mark is reached.
#
#Default:
# netdb_low 900
# netdb_high 1000

#  TAG: netdb_ping_period
#	The minimum period for measuring a site.  There will be at
#	least this much delay between successive pings to the same
#	network.  The default is five minutes.
#
#Default:
# netdb_ping_period 5 minutes

#  TAG: query_icmp	on|off
#	If you want to ask your peers to include ICMP data in their ICP
#	replies, enable this option.
#
#	If your peer has configured Squid (during compilation) with
#	'--enable-icmp' that peer will send ICMP pings to origin server
#	sites of the URLs it receives.  If you enable this option the
#	ICP replies from that peer will include the ICMP data (if available).
#	Then, when choosing a parent cache, Squid will choose the parent with
#	the minimal RTT to the origin server.  When this happens, the
#	hierarchy field of the access.log will be
#	"CLOSEST_PARENT_MISS".  This option is off by default.
#
#Default:
# query_icmp off

#  TAG: test_reachability	on|off
#	When this is 'on', ICP MISS replies will be ICP_MISS_NOFETCH
#	instead of ICP_MISS if the target host is NOT in the ICMP
#	database, or has a zero RTT.
#
#Default:
# test_reachability off

#  TAG: buffered_logs	on|off
#	cache.log log file is written with stdio functions, and as such
#	it can be buffered or unbuffered. By default it will be unbuffered.
#	Buffering it can speed up the writing slightly (though you are
#	unlikely to need to worry unless you run with tons of debugging
#	enabled in which case performance will suffer badly anyway..).
#
#Default:
# buffered_logs off

#  TAG: reload_into_ims	on|off
#	When you enable this option, client no-cache or ``reload''
#	requests will be changed to If-Modified-Since requests.
#	Doing this VIOLATES the HTTP standard.  Enabling this
#	feature could make you liable for problems which it
#	causes.
#
#	see also refresh_pattern for a more selective approach.
#
#Default:
# reload_into_ims off

# POSSIBLE CONFIG ISSUE - AUTOMATICALLY DIRECTING WORMMART QUERIES
#  TAG: always_direct
#	Usage: always_direct allow|deny [!]aclname ...
#
#	Here you can use ACL elements to specify requests which should
#	ALWAYS be forwarded by Squid to the origin servers without using
#	any peers.  For example, to always directly forward requests for
#	local servers ignoring any parents or siblings you may have use
#	something like:
#
#		acl local-servers dstdomain my.domain.net
#		always_direct allow local-servers
#
#	To always forward FTP requests directly, use
#
#		acl FTP proto FTP
#		always_direct allow FTP
#
#	NOTE: There is a similar, but opposite option named
#	'never_direct'.  You need to be aware that "always_direct deny
#	foo" is NOT the same thing as "never_direct allow foo".  You
#	may need to use a deny rule to exclude a more-specific case of
#	some other rule.  Example:
#
#		acl local-external dstdomain external.foo.net
#		acl local-servers dstdomain  .foo.net
#		always_direct deny local-external
#		always_direct allow local-servers
#
#	NOTE: If your goal is to make the client forward the request
#	directly to the origin server bypassing Squid then this needs
#	to be done in the client configuration. Squid configuration
#	can only tell Squid how Squid should fetch the object.
#
#	NOTE: This directive is not related to caching. The replies
#	is cached as usual even if you use always_direct. To not cache
#	the replies see no_cache.
#
#	This option replaces some v1.1 options such as local_domain
#	and local_ip.
#
#Default:
# none
#acl WormMart url_regex biomart
#acl Wormmart_dest dst biomart.wormbase.org
#always_direct
# LOAD BALANCING - THIS MAY BE REQUIRED FOR LOAD BALANCING
#always_direct allow Localhost


# POSSIBLE CONFIG ISSUE
#  TAG: never_direct
#	Usage: never_direct allow|deny [!]aclname ...
#
#	never_direct is the opposite of always_direct.  Please read
#	the description for always_direct if you have not already.
#
#	With 'never_direct' you can use ACL elements to specify
#	requests which should NEVER be forwarded directly to origin
#	servers.  For example, to force the use of a proxy for all
#	requests, except those in your local domain use something like:
#
#		acl local-servers dstdomain .foo.net
#		acl all src 0.0.0.0/0.0.0.0
#		never_direct deny local-servers
#		never_direct allow all
#
#	or if Squid is inside a firewall and there are local intranet
#	servers inside the firewall use something like:
#
#		acl local-intranet dstdomain .foo.net
#		acl local-external dstdomain external.foo.net
#		always_direct deny local-external
#		always_direct allow local-intranet
#		never_direct allow all
#
#	This option replaces some v1.1 options such as inside_firewall
#	and firewall_ip.
#
#Default:
# none

#  TAG: header_access
#	Usage: header_access header_name allow|deny [!]aclname ...
#
#	WARNING: Doing this VIOLATES the HTTP standard.  Enabling
#	this feature could make you liable for problems which it
#	causes.
#
#	This option replaces the old 'anonymize_headers' and the
#	older 'http_anonymizer' option with something that is much
#	more configurable. This new method creates a list of ACLs
#	for each header, allowing you very fine-tuned header
#	mangling.
#
#	You can only specify known headers for the header name.
#	Other headers are reclassified as 'Other'. You can also
#	refer to all the headers with 'All'.
#
#	For example, to achieve the same behaviour as the old
#	'http_anonymizer standard' option, you should use:
#
#		header_access From deny all
#		header_access Referer deny all
#		header_access Server deny all
#		header_access User-Agent deny all
#		header_access WWW-Authenticate deny all
#		header_access Link deny all
#
#	Or, to reproduce the old 'http_anonymizer paranoid' feature
#	you should use:
#
#		header_access Allow allow all
#		header_access Authorization allow all
#		header_access WWW-Authenticate allow all
#		header_access Cache-Control allow all
#		header_access Content-Encoding allow all
#		header_access Content-Length allow all
#		header_access Content-Type allow all
#		header_access Date allow all
#		header_access Expires allow all
#		header_access Host allow all
#		header_access If-Modified-Since allow all
#		header_access Last-Modified allow all
#		header_access Location allow all
#		header_access Pragma allow all
#		header_access Accept allow all
#		header_access Accept-Charset allow all
#		header_access Accept-Encoding allow all
#		header_access Accept-Language allow all
#		header_access Content-Language allow all
#		header_access Mime-Version allow all
#		header_access Retry-After allow all
#		header_access Title allow all
#		header_access Connection allow all
#		header_access Proxy-Connection allow all
#		header_access All deny all
#
#	By default, all headers are allowed (no anonymizing is
#	performed).
#
# Default:
# none

#  TAG: header_replace
#	Usage:   header_replace header_name message
#	Example: header_replace User-Agent Nutscrape/1.0 (CP/M; 8-bit)
#
#	This option allows you to change the contents of headers
#	denied with header_access above, by replacing them with
#	some fixed string. This replaces the old fake_user_agent
#	option.
#
#	By default, headers are removed if denied.
#
# Default:
# none

#  TAG: icon_directory
#	Where the icons are stored. These are normally kept in
#	/usr/local/squid/share/icons
#
# Default:
# icon_directory /usr/local/squid/share/icons

#  TAG: short_icon_urls
#	If this is enabled Squid will use short URLs for icons.
#
#	If off the URLs for icons will always be absolute URLs
#	including the proxy name and port.
#
# Default:
# short_icon_urls off

#  TAG: error_directory
#	If you wish to create your own versions of the default
#	(English) error files, either to customize them to suit your
#	language or company copy the template English files to another
#	directory and point this tag at them.
#
# Default:
# error_directory /usr/local/squid/share/errors/English

#  TAG: maximum_single_addr_tries
#	This sets the maximum number of connection attempts for a
#	host that only has one address (for multiple-address hosts,
#	each address is tried once).
#
#	The default value is one attempt, the (not recommended)
#	maximum is 255 tries.  A warning message will be generated
#	if it is set to a value greater than ten.
#
#	Note: This is in addition to the request reforwarding which
#	takes place if Squid fails to get a satisfying response.
#
# Default:
# maximum_single_addr_tries 1

#  TAG: retry_on_error
#	If set to on Squid will automatically retry requests when
#	receiving an error response. This is mainly useful if you
#	are in a complex cache hierarchy to work around access
#	control errors.
#
# Default:
# retry_on_error off

#  TAG: snmp_port
# Note: This option is only available if Squid is rebuilt with the
#       --enable-snmp option
#
#	Squid can now serve statistics and status information via SNMP.
#	By default it listens to port 3401 on the machine. If you don't
#	wish to use SNMP, set this to "0".
#
# Default:
# snmp_port 3401

#  TAG: snmp_access
# Note: This option is only available if Squid is rebuilt with the
#       --enable-snmp option
#
#	Allowing or denying access to the SNMP port.
#
#	All access to the agent is denied by default.
#	usage:
#
#	snmp_access allow|deny [!]aclname ...
#
#Example:
# snmp_access allow snmppublic localhost
# snmp_access deny all
#
# Default:
snmp_access deny all

#  TAG: snmp_incoming_address
# Note: This option is only available if Squid is rebuilt with the
#       --enable-snmp option
#
#  TAG: snmp_outgoing_address
# Note: This option is only available if Squid is rebuilt with the
#       --enable-snmp option
#
#	Just like 'udp_incoming_address' above, but for the SNMP port.
#
#	snmp_incoming_address	is used for the SNMP socket receiving
#				messages from SNMP agents.
#	snmp_outgoing_address	is used for SNMP packets returned to SNMP
#				agents.
#
#	The default snmp_incoming_address (0.0.0.0) is to listen on all
#	available network interfaces.
#
#	If snmp_outgoing_address is set to 255.255.255.255 (the default)
#	it will use the same socket as snmp_incoming_address. Only
#	change this if you want to have SNMP replies sent using another
#	address than where this Squid listens for SNMP queries.
#
#	NOTE, snmp_incoming_address and snmp_outgoing_address can not have
#	the same value since they both use port 3401.
#
# Default:
# snmp_incoming_address 0.0.0.0
# snmp_outgoing_address 255.255.255.255

#  TAG: as_whois_server
#	WHOIS server to query for AS numbers.  NOTE: AS numbers are
#	queried only when Squid starts up, not for every request.
#
# Default:
# as_whois_server whois.ra.net
# as_whois_server whois.ra.net

#  TAG: wccp_router
#	Use this option to define your WCCP ``home'' router for
#	Squid.   Setting the 'wccp_router' to 0.0.0.0 (the default)
#	disables WCCP.
#
# Default:
# wccp_router 0.0.0.0

#  TAG: wccp_version
#	According to some users, Cisco IOS 11.2 only supports WCCP
#	version 3.  If you're using that version of IOS, change
#	this value to 3.
#
# Default:
# wccp_version 4

#  TAG: wccp_incoming_address
#  TAG: wccp_outgoing_address
#        wccp_incoming_address   Use this option if you require WCCP
#				messages to be received on only one
#				interface.  Do NOT use this option if
#				you're unsure how many interfaces you
#				have, or if you know you have only one
#				interface.
#
#	wccp_outgoing_address	Use this option if you require WCCP
#				messages to be sent out on only one
#				interface.  Do NOT use this option if
#				you're unsure how many interfaces you
#				have, or if you know you have only one
#				interface.
#
#        The default behavior is to not bind to any specific address.
#
#        NOTE, wccp_incoming_address and wccp_outgoing_address can not have
#        the same value since they both use port 2048.
#
# Default:
# wccp_incoming_address 0.0.0.0
# wccp_outgoing_address 255.255.255.255


# POSSIBLE CONFIG OPTIONS
# DELAY POOL PARAMETERS (all require DELAY_POOLS compilation option)
# -----------------------------------------------------------------------------

#  TAG: delay_pools
# Note: This option is only available if Squid is rebuilt with the
#       --enable-delay-pools option
#
#	This represents the number of delay pools to be used.  For example,
#	if you have one class 2 delay pool and one class 3 delays pool, you
#	have a total of 2 delay pools.
#
# Default:
# delay_pools 0

#  TAG: delay_class
# Note: This option is only available if Squid is rebuilt with the
#       --enable-delay-pools option
#
#	This defines the class of each delay pool.  There must be exactly one
#	delay_class line for each delay pool.  For example, to define two
#	delay pools, one of class 2 and one of class 3, the settings above
#	and here would be:
#
#Example:
# delay_pools 2      # 2 delay pools
# delay_class 1 2    # pool 1 is a class 2 pool
# delay_class 2 3    # pool 2 is a class 3 pool
#
#	The delay pool classes are:
#
#		class 1		Everything is limited by a single aggregate
#				bucket.
#
#		class 2 	Everything is limited by a single aggregate
#				bucket as well as an "individual" bucket chosen
#				from bits 25 through 32 of the IP address.
#
#		class 3		Everything is limited by a single aggregate
#				bucket as well as a "network" bucket chosen
#				from bits 17 through 24 of the IP address and a
#				"individual" bucket chosen from bits 17 through
#				32 of the IP address.
#
#	NOTE: If an IP address is a.b.c.d
#		-> bits 25 through 32 are "d"
#		-> bits 17 through 24 are "c"
#		-> bits 17 through 32 are "c * 256 + d"
#
# Default:
# none

#  TAG: delay_access
# Note: This option is only available if Squid is rebuilt with the
#       --enable-delay-pools option
#
#	This is used to determine which delay pool a request falls into.
#
#	delay_access is sorted per pool and the matching starts with pool 1,
#       	then pool 2, ..., and finally pool N. The first delay pool where the
#       	request is allowed is selected for the request. If it does not allow
#	the request to any pool then the request is not delayed (default).
#
#      	For example, if you want some_big_clients in delay
#	pool 1 and lotsa_little_clients in delay pool 2:
#
#Example:
# delay_access 1 allow some_big_clients
# delay_access 1 deny all
# delay_access 2 allow lotsa_little_clients
# delay_access 2 deny all
#
# Default:
# none

#  TAG: delay_parameters
# Note: This option is only available if Squid is rebuilt with the
#       --enable-delay-pools option
#
#	This defines the parameters for a delay pool.  Each delay pool has
#	a number of "buckets" associated with it, as explained in the
#	description of delay_class.  For a class 1 delay pool, the syntax is:
#
#delay_parameters pool aggregate
#
#	For a class 2 delay pool:
#
#delay_parameters pool aggregate individual
#
#	For a class 3 delay pool:
#
#delay_parameters pool aggregate network individual
#
#	The variables here are:
#
#		pool		a pool number - ie, a number between 1 and the
#				number specified in delay_pools as used in
#				delay_class lines.
#
#		aggregate	the "delay parameters" for the aggregate bucket
#				(class 1, 2, 3).
#
#		individual	the "delay parameters" for the individual
#				buckets (class 2, 3).
#
#		network		the "delay parameters" for the network buckets
#				(class 3).
#
#	A pair of delay parameters is written restore/maximum, where restore is
#	the number of bytes (not bits - modem and network speeds are usually
#	quoted in bits) per second placed into the bucket, and maximum is the
#	maximum number of bytes which can be in the bucket at any time.
#
#	For example, if delay pool number 1 is a class 2 delay pool as in the
#	above example, and is being used to strictly limit each host to 64kbps
#	(plus overheads), with no overall limit, the line is:
#
#delay_parameters 1 -1/-1 8000/8000
#
#	Note that the figure -1 is used to represent "unlimited".
#
#	And, if delay pool number 2 is a class 3 delay pool as in the above
#	example, and you want to limit it to a total of 256kbps (strict limit)
#	with each 8-bit network permitted 64kbps (strict limit) and each
#	individual host permitted 4800bps with a bucket maximum size of 64kb
#	to permit a decent web page to be downloaded at a decent speed
#	(if the network is not being limited due to overuse) but slow down
#	large downloads more significantly:
#
#delay_parameters 2 32000/32000 8000/8000 600/8000
#
#	There must be one delay_parameters line for each delay pool.
#
# Default:
# none

#  TAG: delay_initial_bucket_level	(percent, 0-100)
# Note: This option is only available if Squid is rebuilt with the
#       --enable-delay-pools option
#
#	The initial bucket percentage is used to determine how much is put
#	in each bucket when squid starts, is reconfigured, or first notices
#	a host accessing it (in class 2 and class 3, individual hosts and
#	networks only have buckets associated with them once they have been
#	"seen" by squid).
#
# Default:
# delay_initial_bucket_level 50

#  TAG: incoming_icp_average
#  TAG: incoming_http_average
#  TAG: incoming_dns_average
#  TAG: min_icp_poll_cnt
#  TAG: min_dns_poll_cnt
#  TAG: min_http_poll_cnt
#	Heavy voodoo here.  I can't even believe you are reading this.
#	Are you crazy?  Don't even think about adjusting these unless
#	you understand the algorithms in comm_select.c first!
#
# Default:
# incoming_icp_average 6
# incoming_http_average 4
# incoming_dns_average 4
# min_icp_poll_cnt 8
# min_dns_poll_cnt 8
# min_http_poll_cnt 8

#  TAG: max_open_disk_fds
#	To avoid having disk as the I/O bottleneck Squid can optionally
#	bypass the on-disk cache if more than this amount of disk file
#	descriptors are open.
#
#	A value of 0 indicates no limit.
#
# Default:
# max_open_disk_fds 0

#  TAG: offline_mode
#	Enable this option and Squid will never try to validate cached
#	objects.
#
# Default:
# offline_mode off

#  TAG: uri_whitespace
#	What to do with requests that have whitespace characters in the
#	URI.  Options:
#
#	strip:  The whitespace characters are stripped out of the URL.
#		This is the behavior recommended by RFC2396.
#	deny:   The request is denied.  The user receives an "Invalid
#		Request" message.
#	allow:  The request is allowed and the URI is not changed.  The
#		whitespace characters remain in the URI.  Note the
#		whitespace is passed to redirector processes if they
#		are in use.
#	encode:	The request is allowed and the whitespace characters are
#		encoded according to RFC1738.  This could be considered
#		a violation of the HTTP/1.1
#		RFC because proxies are not allowed to rewrite URI's.
#	chop:	The request is allowed and the URI is chopped at the
#		first whitespace.  This might also be considered a
#		violation.
#
#Default:
# uri_whitespace strip

#  TAG: broken_posts
#	A list of ACL elements which, if matched, causes Squid to send
#	an extra CRLF pair after the body of a PUT/POST request.
#
#	Some HTTP servers has broken implementations of PUT/POST,
#	and rely on an extra CRLF pair sent by some WWW clients.
#
#	Quote from RFC2068 section 4.1 on this matter:
#
#	  Note: certain buggy HTTP/1.0 client implementations generate an
#	  extra CRLF's after a POST request. To restate what is explicitly
#	  forbidden by the BNF, an HTTP/1.1 client must not preface or follow
#	  a request with an extra CRLF.
#
#Example:
# acl buggy_server url_regex ^http://....
# broken_posts allow buggy_server
#
# Default:
# none

#  TAG: mcast_miss_addr
# Note: This option is only available if Squid is rebuilt with the
#       -DMULTICAST_MISS_STREAM option
#
#	If you enable this option, every "cache miss" URL will
#	be sent out on the specified multicast address.
#
#	Do not enable this option unless you are are absolutely
#	certain you understand what you are doing.
#
# Default:
# mcast_miss_addr 255.255.255.255

#  TAG: mcast_miss_ttl
# Note: This option is only available if Squid is rebuilt with the
#       -DMULTICAST_MISS_TTL option
#
#	This is the time-to-live value for packets multicasted
#	when multicasting off cache miss URLs is enabled.  By
#	default this is set to 'site scope', i.e. 16.
#
# Default:
# mcast_miss_ttl 16

#  TAG: mcast_miss_port
# Note: This option is only available if Squid is rebuilt with the
#       -DMULTICAST_MISS_STREAM option
#
#	This is the port number to be used in conjunction with
#	'mcast_miss_addr'.
#
# Default:
# mcast_miss_port 3135

#  TAG: mcast_miss_encode_key
# Note: This option is only available if Squid is rebuilt with the
#       -DMULTICAST_MISS_STREAM option
#
#	The URLs that are sent in the multicast miss stream are
#	encrypted.  This is the encryption key.
#
# Default:
# mcast_miss_encode_key XXXXXXXXXXXXXXXX

#  TAG: nonhierarchical_direct
#	By default, Squid will send any non-hierarchical requests
#	(matching hierarchy_stoplist or not cachable request type) direct
#	to origin servers.
#
#	If you set this to off, Squid will prefer to send these
#	requests to parents.
#
#	Note that in most configurations, by turning this off you will only
#	add latency to these request without any improvement in global hit
#	ratio.
#
#	If you are inside an firewall see never_direct instead of
#	this directive.
#
# Default:
# nonhierarchical_direct on

#  TAG: prefer_direct
#	Normally Squid tries to use parents for most requests. If you for some
#	reason like it to first try going direct and only use a parent if
#	going direct fails set this to on.
#
#	By combining nonhierarchical_direct off and prefer_direct on you
#	can set up Squid to use a parent as a backup path if going direct
#	fails.
#
#	Note: If you want Squid to use parents for all requests see
#	the never_direct directive. prefer_direct only modifies how Squid
#	acts on cachable requests.
#
# Default:
# prefer_direct off

#  TAG: strip_query_terms
#	By default, Squid strips query terms from requested URLs before
#	logging.  This protects your user's privacy.
#
# Default:
# strip_query_terms on
# WormBase: This option is OFF to get full logging in squid
strip_query_terms off

#  TAG: coredump_dir
#	By default Squid leaves core files in the directory from where
#	it was started. If you set 'coredump_dir' to a directory
#	that exists, Squid will chdir() to that directory at startup
#	and coredump files will be left there.
#
# Default:
# coredump_dir none
#
# Leave coredumps in the first cache dir
coredump_dir /usr/local/squid/var/cache

#  TAG: redirector_bypass
#	When this is 'on', a request will not go through the
#	redirector if all redirectors are busy.  If this is 'off'
#	and the redirector queue grows too large, Squid will exit
#	with a FATAL error and ask you to increase the number of
#	redirectors.  You should only enable this if the redirectors
#	are not critical to your caching system.  If you use
#	redirectors for access control, and you enable this option,
#	users may have access to pages they should not
#	be allowed to request.
#
# Default:
# redirector_bypass off

#  TAG: ignore_unknown_nameservers
#	By default Squid checks that DNS responses are received
#	from the same IP addresses they are sent to.  If they
#	don't match, Squid ignores the response and writes a warning
#	message to cache.log.  You can allow responses from unknown
#	nameservers by setting this option to 'off'.
#
# Default:
# ignore_unknown_nameservers on

#  TAG: digest_generation
# Note: This option is only available if Squid is rebuilt with the
#       --enable-cache-digests option
#
#	This controls whether the server will generate a Cache Digest
#	of its contents.  By default, Cache Digest generation is
#	enabled if Squid is compiled with USE_CACHE_DIGESTS defined.
#
# Default:
# digest_generation on

#  TAG: digest_bits_per_entry
# Note: This option is only available if Squid is rebuilt with the
#       --enable-cache-digests option
#
#	This is the number of bits of the server's Cache Digest which
#	will be associated with the Digest entry for a given HTTP
#	Method and URL (public key) combination.  The default is 5.
#
# Default:
# digest_bits_per_entry 5

#  TAG: digest_rebuild_period	(seconds)
# Note: This option is only available if Squid is rebuilt with the
#       --enable-cache-digests option
#
#	This is the number of seconds between Cache Digest rebuilds.
#
# Default:
# digest_rebuild_period 1 hour

#  TAG: digest_rewrite_period	(seconds)
# Note: This option is only available if Squid is rebuilt with the
#       --enable-cache-digests option
#
#	This is the number of seconds between Cache Digest writes to
#	disk.
#
# Default:
# digest_rewrite_period 1 hour

#  TAG: digest_swapout_chunk_size	(bytes)
# Note: This option is only available if Squid is rebuilt with the
#       --enable-cache-digests option
#
#	This is the number of bytes of the Cache Digest to write to
#	disk at a time.  It defaults to 4096 bytes (4KB), the Squid
#	default swap page.
#
# Default:
# digest_swapout_chunk_size 4096 bytes

#  TAG: digest_rebuild_chunk_percentage	(percent, 0-100)
# Note: This option is only available if Squid is rebuilt with the
#       --enable-cache-digests option
#
#	This is the percentage of the Cache Digest to be scanned at a
#	time.  By default it is set to 10% of the Cache Digest.
#
# Default:
# digest_rebuild_chunk_percentage 10

#  TAG: chroot
#	Use this to have Squid do a chroot() while initializing.  This
#	also causes Squid to fully drop root privileges after
#	initializing.  This means, for example, that if you use a HTTP
#	port less than 1024 and try to reconfigure, you will get an
#	error.
#
# Default:
# none

#  TAG: client_persistent_connections
#  TAG: server_persistent_connections
#	Persistent connection support for clients and servers.  By
#	default, Squid uses persistent connections (when allowed)
#	with its clients and servers.  You can use these options to
#	disable persistent connections with clients and/or servers.
#
# Default:
# client_persistent_connections on
# server_persistent_connections on

#  TAG: detect_broken_pconn
#	Some servers have been found to incorrectly signal the use
#	of HTTP/1.0 persistent connections even on replies not
#	compatible, causing significant delays. This server problem
#	has mostly been seen on redirects.
#
#	By enabling this directive Squid attempts to detect such
#	broken replies and automatically assume the reply is finished
#	after 10 seconds timeout.
#
# Default:
# detect_broken_pconn off

#  TAG: balance_on_multiple_ip
#	Some load balancing servers based on round robin DNS have been 
#	found not to preserve user session state across requests
#	to different IP addresses.
#
#	By default Squid rotates IP's per request. By disabling
#	this directive only connection failure trigers rotation.
#
# Default:
# balance_on_multiple_ip on

#  TAG: pipeline_prefetch
#	To boost the performance of pipelined requests to closer
#	match that of a non-proxied environment Squid can try to fetch
#	up to two requests in parallell from a pipeline.
#
#	Defaults to off for bandwidth management and access logging
#	reasons.
#
# Default:
# pipeline_prefetch off

#  TAG: extension_methods
#	Squid only knows about standardized HTTP request methods.
#	You can add up to 20 additional "extension" methods here.
#
# Default:
# none

#  TAG: request_entities
#	Squid defaults to deny GET and HEAD requests with request entities,
#	as the meaning of such requests are undefined in the HTTP standard
#	even if not explicitly forbidden.
#
#	Set this directive to on if you have clients which insists
#	on sending request entities in GET or HEAD requests. But be warned
#	that there is server software (both proxies and web servers) which
#	can fail to properly process this kind of request which may make you
#	vulnerable to cache pollution attacks if enabled.
#
# Default:
# request_entities off

# POSSIBLE CONFIG OPTION
#  TAG: high_response_time_warning	(msec)
#	If the one-minute median response time exceeds this value,
#	Squid prints a WARNING with debug level 0 to get the
#	administrators attention.  The value is in milliseconds.
#
#Default:
# high_response_time_warning 0

# POSSIBLE CONFIG OPTION
#  TAG: high_page_fault_warning
#	If the one-minute average page fault rate exceeds this
#	value, Squid prints a WARNING with debug level 0 to get
#	the administrators attention.  The value is in page faults
#	per second.
#
# Default:
# high_page_fault_warning 0

# POSSIBLE CONFIG OPTION
#  TAG: high_memory_warning
#	If the memory usage (as determined by mallinfo) exceeds
#	value, Squid prints a WARNING with debug level 0 to get
#	the administrators attention.
#
# Default:
# high_memory_warning 0

#  TAG: store_dir_select_algorithm
#	Set this to 'round-robin' as an alternative.
#
# Default:
# store_dir_select_algorithm least-load

#  TAG: forward_log
# Note: This option is only available if Squid is rebuilt with the
#       -DWIP_FWD_LOG option
#
#	Logs the server-side requests.
#
#	This is currently work in progress.
#
# Default:
# none

#  TAG: ie_refresh	on|off
#	Microsoft Internet Explorer up until version 5.5 Service
#	Pack 1 has an issue with transparent proxies, wherein it
#	is impossible to force a refresh.  Turning this on provides
#	a partial fix to the problem, by causing all IMS-REFRESH
#	requests from older IE versions to check the origin server
#	for fresh content.  This reduces hit ratio by some amount
#	(~10% in my experience), but allows users to actually get
#	fresh content when they want it.  Note that because Squid
#	cannot tell if the user is using 5.5 or 5.5SP1, the behavior
#	of 5.5 is unchanged from old versions of Squid (i.e. a
#	forced refresh is impossible).  Newer versions of IE will,
#	hopefully, continue to have the new behavior and will be
#	handled based on that assumption.  This option defaults to
#	the old Squid behavior, which is better for hit ratios but
#	worse for clients using IE, if they need to be able to
#	force fresh content.
#
# Default:
# ie_refresh off

#  TAG: vary_ignore_expire	on|off
#	Many HTTP servers supporting Vary gives such objects
#	immediate expiry time with no cache-control header
#	when requested by a HTTP/1.0 client. This option
#	enables Squid to ignore such expiry times until
#	HTTP/1.1 is fully implemented.
#	WARNING: This may eventually cause some varying
#	objects not intended for caching to get cached.
#
# Default:
# vary_ignore_expire off

#  TAG: sleep_after_fork	(microseconds)
#	When this is set to a non-zero value, the main Squid process
#	sleeps the specified number of microseconds after a fork()
#	system call. This sleep may help the situation where your
#	system reports fork() failures due to lack of (virtual)
#	memory. Note, however, that if you have a lot of child
#	processes, these sleep delays will add up and your
#	Squid will not service requests for some amount of time
#	until all the child processes have been started.
#
# Default:
# sleep_after_fork 0

#  TAG: relaxed_header_parser	on|off|warn
#	In the default "on" setting Squid accepts certain forms
#	of non-compliant HTTP messages where it is unambiguous
#	what the sending application intended even if the message
#	is not correctly formatted. The messages is then normalized
#	to the correct form when forwarded by Squid.
#
#	If set to "warn" then a warning will be emitted in cache.log
#	each time such HTTP error is encountered.
#
#	If set to "off" then such HTTP errors will cause the request
#	or response to be rejected.
#
# Default:
# relaxed_header_parser on





