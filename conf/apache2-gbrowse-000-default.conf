<VirtualHost *:80>
   ServerName www.wormbase.org
#  PerlOptions +Parent
  PerlSwitches -Mlib=/usr/local/wormbase/extlib/lib/perl5/x86_64-linux-gnu-thread-multi \
               -Mlib=/usr/local/wormbase/extlib/lib/perl5

   # Only for sites also running the website.
   #   Include /usr/local/wormbase/website/classic/conf/httpd.conf

   #   ScriptAlias  "/db/gb2"     "/usr/local/wormbase/services/gbrowse2/current/cgi/gb2"
   Alias       "/gb2-support/"     "/usr/local/wormbase/services/gbrowse2/support-files/"
   Alias       "/gbrowse2/i" "/usr/local/wormbase/tmp/gbrowse/images"
   Alias       "/gbrowse2"   "/usr/local/wormbase/services/gbrowse2/current/html"

   LogFormat "%h %l %u %t \"%r\" %s %b" common
   LogFormat "%h %l %u %t %{Referer}i \"%{User-Agent}i\" \"%r\" %s %b" combined_format
   #LogFormat "%h %l %u %t %{Referer}i \"%{User-Agent}i\" \"%r\" %s %b %P" combined_format  
   LogFormat "witheld %l %u %t \"%r\" %s %b" anonymous

   ErrorLog     /usr/local/wormbase/logs/classic/error.log
   #CustomLog    /usr/local/wormbase/logs/classic-access_log common
   CustomLog    /usr/local/wormbase/logs/classic/access.log combined_format

    <Directory "/usr/local/wormbase/services/gbrowse2/current/cgi/gb2">
       SetEnv PERL5LIB "/usr/local/wormbase/extlib/lib/perl5:/usr/local/wormbase/extlib/lib/perl5/x86_64-linux-gnu-thread-multi:/usr/local/wormbase/services/gbrowse2/support-files/lib:/usr/local/wormbase/services/gbrowse2/support-files/lib/Bio:/usr/local/wormbase/services/gbrowse2/support-files/lib/Bio/Graphics:/usr/local/wormbase/services/gbrowse2/support-files/lib/Bio/Graphics/Glyph"
       SetEnv GBROWSE_CONF   "/usr/local/wormbase/services/gbrowse2/support-files/conf"

    </Directory>

    <IfModule mod_fcgid.c>
    Alias /db/gb2 "/usr/local/wormbase/services/gbrowse2/current/cgi/gb2"
    <Location /db/gb2>
            SetHandler	 fcgid-script
            Options	  ExecCGI
            Order allow,deny
            Allow from all
        </Location>
	IdleTimeout 300
	FcgidInitialEnv GBROWSE_CONF /usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/conf
	FcgidInitialEnv DOCUMENT_ROOT /usr/local/wormbase/tmp/gbrowse/synteny
	FcgidInitialEnv PERL5LIB "/usr/local/wormbase/extlib/lib/perl5: \
			          /usr/local/wormbase/extlib/lib/perl5/x86_64-linux-gnu-thread-multi: \
			          /usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib: \
				  /usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib/Bio: \
		                  /usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib/Bio/Graphics: \
			          /usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib/Bio/Graphics/Glyph"
    </IfModule>


# <IfModule mod_fastcgi.c>
#   FastCgiConfig -idle-timeout 300 -initial-env PERL5LIB=/usr/local/wormbase/extlib/lib/perl5:/usr/local/wormbase/extlib/lib/perl5/x8\
#6_64-linux-gnu-thread-multi:/usr/local/wormbase/services/gbrowse2/support-files/lib:/usr/local/wormbase/services/gbrowse2/support-fil\
#es/lib/Bio:/usr/local/wormbase/services/gbrowse2/support-files/lib/Bio/Graphics:/usr/local/wormbase/services/gbrowse2/support-files/l\
#ib/Bio/Graphics/Glyph -initial-env GBROWSE_CONF=/usr/local/wormbase/services/gbrowse2/support-files/conf
#
#</IfModule>


#Redirect /db/gb2 http://www.wormbase.org/gb2

</VirtualHost>



# GBrowse_syn
# Running under it's own virtual host since it has some weird configuration quirks.
<VirtualHost *:8080>
  ServerName www.wormbase.org
  PerlSwitches -Mlib=/usr/local/wormbase/extlib/lib/perl5/x86_64-linux-gnu-thread-multi \
               -Mlib=/usr/local/wormbase/extlib/lib/perl5

   ScriptAlias  "/db/gb2"     "/usr/local/wormbase/services/gbrowse2/current/cgi/gb2"
   Alias       "/gb2-support/"     "/usr/local/wormbase/services/gbrowse2/support-files/"
   Alias       "/gbrowse2/i" "/usr/local/wormbase/tmp/gbrowse/images"
   Alias       "/gbrowse2"   "/usr/local/wormbase/services/gbrowse2/current/html"


   LogFormat "%h %l %u %t \"%r\" %s %b" common
   LogFormat "%h %l %u %t %{Referer}i \"%{User-Agent}i\" \"%r\" %s %b" combined_format
   #LogFormat "%h %l %u %t %{Referer}i \"%{User-Agent}i\" \"%r\" %s %b %P" combined_format  
   LogFormat "witheld %l %u %t \"%r\" %s %b" anonymous

   ErrorLog     /usr/local/wormbase/logs/gbrowse_syn/error.log
   #CustomLog    /usr/local/wormbase/logs/classic-access_log common
   CustomLog    /usr/local/wormbase/logs/gbrowse_syn/access.log combined_format

#   SetEnv DOCUMENT_ROOT "/usr/local/wormbase/services/gbrowse2/current/html"

    <Directory "/usr/local/wormbase/services/gbrowse2/current/cgi/gb2">
       SetEnv PERL5LIB "/usr/local/wormbase/extlib/lib/perl5:/usr/local/wormbase/extlib/lib/perl5/x86_64-linux-gnu-thread-multi:/usr/local/wormbase/services/gbrowse2/support-files/lib:/usr/local/wormbase/services/gbrowse2/support-files/lib/Bio:/usr/local/wormbase/services/gbrowse2/support-files/lib/Bio/Graphics:/usr/local/wormbase/services/gbrowse2/support-files/lib/Bio/Graphics/Glyph"
       SetEnv GBROWSE_CONF   "/usr/local/wormbase/services/gbrowse2/support-files/conf"
       SetEnv DOCUMENT_ROOT "/usr/local/wormbase/services/gbrowse2/current/html"

    </Directory>
</VirtualHost>






# GBrowse2 for the beta test site
<VirtualHost *:80>
    ServerName beta.wormbase.org

   LogFormat "%h %l %u %t \"%r\" %s %b" common
   LogFormat "%h %l %u %t %{Referer}i \"%{User-Agent}i\" \"%r\" %s %b" combined_format
   #LogFormat "%h %l %u %t %{Referer}i \"%{User-Agent}i\" \"%r\" %s %b %P" combined_format  
   LogFormat "witheld %l %u %t \"%r\" %s %b" anonymous

   ErrorLog     /usr/local/wormbase/logs/www/error.log
   CustomLog    /usr/local/wormbase/logs/www/access.log combined_format

    # Support files: the wormbase css file for gbrowse, banner image, etc
    Alias      "/gbrowse2/i/" "/usr/local/wormbase/tmp/gbrowse/images/"
    Alias        "/gbrowse-static/i" "/usr/local/wormbase/tmp/gbrowse/images"
    Alias        "/gbrowse-static"   "/usr/local/wormbase/website/production/root/gbrowse"

    <Directory "/usr/local/wormbase/tmp/gbrowse">
       Allow from all
    </Directory>

    <Directory "/usr/local/wormbase/services/gbrowse2/website-gbrowse2-support">
      Options -Indexes -MultiViews +FollowSymLinks
      Order allow,deny
      Allow from all
    </Directory>

#    <Directory "/usr/local/wormbase/services/gbrowse2/current/html">
    <Directory "/usr/local/wormbase/website/production/root/gbrowse">
      Options -Indexes -MultiViews +FollowSymLinks
      Order allow,deny
      Allow from all
    </Directory>


#    <Directory "/usr/local/wormbase/services/gbrowse2/current/cgi/gb2">
    <Directory "/usr/local/wormbase/website/production/root/gbrowse/cgi">
      SetEnv PERL5LIB "/usr/local/wormbase/extlib2/lib/perl5:/usr/local/wormbase/extlib2/lib/perl5/x86_64-linux-gnu-thread-multi:/usr/local/wormbase/website/production/lib:/usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib/Bio:/usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib/Bio/Graphics:/usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib/Bio/Graphics/Glyph"
       SetEnv GBROWSE_CONF   "/usr/local/wormbase/website/production/conf/gbrowse"
       AllowOverride None
       Options None
       Order allow,deny
       Allow from all

        <IfModule mod_fcgid.c>
#      #       Alias /fgb2 "/usr/local/wormbase/gbrowse-test/cgi/gb2"
      #       <Location /gb2>
              SetHandler   fcgid-script
              Options +ExecCGI
      #          Order allow,deny
      #          Allow from all
      #        </Location>
   </IfModule>
    </Directory>

    <IfModule mod_fcgid.c>
    Alias /tools/genome "/usr/local/wormbase/website/production/root/gbrowse/cgi"
    <Location /tools/genome>
            SetHandler	 fcgid-script
            Options	  ExecCGI
            Order allow,deny
            Allow from all
        </Location>
	IdleTimeout 300
	FcgidInitialEnv GBROWSE_CONF /usr/local/wormbase/website/production/conf/gbrowse
	FcgidInitialEnv PERL5LIB "/usr/local/wormbase/extlib2/lib/perl5: \
			          /usr/local/wormbase/extlib2/lib/perl5/x86_64-linux-gnu-thread-multi: \
			          /usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib: \
				  /usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib/Bio: \
		                  /usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib/Bio/Graphics: \
			          /usr/local/wormbase/services/gbrowse2/website-gbrowse2-support/lib/Bio/Graphics/Glyph"
    </IfModule>
</VirtualHost>
